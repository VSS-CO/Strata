<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Package Details - Strata Registry</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-feature-settings: "liga" 1, "calt" 1;
    }
    .version-row {
      transition: background-color 0.2s;
    }
    .version-row:hover {
      background-color: rgba(59, 130, 246, 0.1);
    }
    code {
      background-color: #1e293b;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.875rem;
    }
    pre {
      background-color: #0f172a;
      border: 1px solid #1e293b;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
    }
  </style>
</head>
<body class="bg-slate-950 text-slate-100">

<!-- HEADER -->
<header class="border-b border-slate-800 sticky top-0 z-50 bg-slate-950/95 backdrop-blur">
  <div class="max-w-7xl mx-auto px-8 py-4 flex justify-between items-center">
    <div class="flex items-center gap-2">
      <a href="index.html" class="text-slate-400 hover:text-white">ðŸ“¦ Strata Registry</a>
    </div>
    <nav class="space-x-6 text-lg">
      <a href="../index.html" class="text-slate-400 hover:text-white transition">Home</a>
      <a href="../docs.html" class="text-slate-400 hover:text-white transition">Docs</a>
      <a href="index.html" class="text-white font-semibold">Registry</a>
    </nav>
  </div>
</header>

<div class="max-w-7xl mx-auto px-8 py-16">
  <!-- PACKAGE HEADER -->
  <div class="mb-12">
    <div class="mb-4">
      <a href="index.html" class="text-blue-400 hover:text-blue-300">&larr; Back to Registry</a>
    </div>
    
    <div class="flex justify-between items-start mb-6">
      <div>
        <h1 id="packageName" class="text-5xl font-bold mb-2">Loading...</h1>
        <p id="packageAuthor" class="text-xl text-slate-400">by Unknown</p>
      </div>
      <div class="text-right">
        <div id="packageVersion" class="text-3xl font-bold text-blue-400 mb-2">1.0.0</div>
        <button onclick="copyInstall()" class="bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-6 rounded-lg transition">
          Copy Install
        </button>
      </div>
    </div>

    <p id="packageDescription" class="text-xl text-slate-300 mb-6">Loading...</p>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 p-6 bg-slate-900 rounded-lg border border-slate-800">
      <div>
        <div class="text-sm text-slate-400 mb-1">License</div>
        <div id="packageLicense" class="font-semibold">GPL-3.0</div>
      </div>
      <div>
        <div class="text-sm text-slate-400 mb-1">Total Downloads</div>
        <div id="packageDownloads" class="font-semibold">0</div>
      </div>
      <div>
        <div class="text-sm text-slate-400 mb-1">Versions</div>
        <div id="versionCount" class="font-semibold">1</div>
      </div>
      <div>
        <div class="text-sm text-slate-400 mb-1">Updated</div>
        <div id="packageUpdated" class="font-semibold">Never</div>
      </div>
    </div>
  </div>

  <!-- TABS -->
  <div class="border-b border-slate-800 mb-8">
    <div class="flex gap-8">
      <button onclick="switchTab('overview')" id="tab-overview" class="tab-button active py-4 border-b-2 border-blue-600 text-white font-semibold">
        Overview
      </button>
      <button onclick="switchTab('versions')" id="tab-versions" class="tab-button py-4 border-b-2 border-transparent text-slate-400 hover:text-white font-semibold">
        Versions
      </button>
      <button onclick="switchTab('readme')" id="tab-readme" class="tab-button py-4 border-b-2 border-transparent text-slate-400 hover:text-white font-semibold">
        README
      </button>
    </div>
  </div>

  <!-- OVERVIEW TAB -->
  <div id="overview-tab" class="tab-content">
    <div class="grid grid-cols-3 gap-8">
      <!-- Main content -->
      <div class="col-span-2">
        <h2 class="text-2xl font-bold mb-4">Installation</h2>
        <pre><code id="installCommand">strata add package-name</code></pre>

        <h2 class="text-2xl font-bold mb-4 mt-8">Quick Start</h2>
        <p class="text-slate-300 mb-4">Here's a quick example of how to use this package:</p>
        <pre><code id="quickStart">import module from package-name

// Use the module
</code></pre>

        <h2 class="text-2xl font-bold mb-4 mt-8">Features</h2>
        <ul id="features" class="space-y-2 text-slate-300">
          <li class="flex gap-3">
            <span class="text-green-400">âœ“</span>
            <span>Feature 1</span>
          </li>
        </ul>

        <h2 class="text-2xl font-bold mb-4 mt-8">Keywords</h2>
        <div id="keywords" class="flex gap-2 flex-wrap">
          <span class="inline-block bg-blue-600/20 text-blue-400 px-3 py-1 rounded-full text-sm">keyword</span>
        </div>
      </div>

      <!-- Sidebar -->
      <div>
        <div class="p-6 bg-slate-900 rounded-lg border border-slate-800 sticky top-24">
          <h3 class="font-bold text-lg mb-4">Links</h3>
          <ul class="space-y-3">
            <li>
              <a id="homepageLink" href="#" target="_blank" class="text-blue-400 hover:text-blue-300">
                â†’ Homepage
              </a>
            </li>
            <li>
              <a id="repositoryLink" href="#" target="_blank" class="text-blue-400 hover:text-blue-300">
                â†’ GitHub Repository
              </a>
            </li>
            <li>
              <a href="#" class="text-blue-400 hover:text-blue-300">
                â†’ Report Issue
              </a>
            </li>
          </ul>

          <h3 class="font-bold text-lg mb-4 mt-6">Stats</h3>
          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-slate-400">Package Size</span>
              <span id="packageSize" class="font-semibold">2 KB</span>
            </div>
            <div class="flex justify-between">
              <span class="text-slate-400">Maintainers</span>
              <span id="maintainerCount" class="font-semibold">1</span>
            </div>
            <div class="flex justify-between">
              <span class="text-slate-400">Quality Score</span>
              <span class="font-semibold text-green-400">90%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- VERSIONS TAB -->
  <div id="versions-tab" class="tab-content hidden">
    <h2 class="text-2xl font-bold mb-6">All Versions</h2>
    <div class="bg-slate-900 rounded-lg border border-slate-800 overflow-hidden">
      <table class="w-full">
        <thead>
          <tr class="border-b border-slate-800 bg-slate-800/50">
            <th class="px-6 py-4 text-left font-semibold">Version</th>
            <th class="px-6 py-4 text-left font-semibold">Published</th>
            <th class="px-6 py-4 text-left font-semibold">Downloads</th>
            <th class="px-6 py-4 text-right font-semibold">Action</th>
          </tr>
        </thead>
        <tbody id="versionsList">
          <!-- Populated by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- README TAB -->
  <div id="readme-tab" class="tab-content hidden">
    <div class="prose prose-invert max-w-none">
      <h2 class="text-2xl font-bold mb-4">Documentation</h2>
      <p class="text-slate-400 text-lg">
        For full documentation, visit the package's GitHub repository or consult the README.md file in the package.
      </p>
    </div>
  </div>
</div>

<script>
  // Mock package data
  const packages = {
    "string-utils": {
      "name": "string-utils",
      "description": "String utility functions for Strata",
      "author": "Strata Contributors",
      "license": "GPL-3.0",
      "homepage": "https://github.com/strata-lang/string-utils",
      "repository": "https://github.com/strata-lang/string-utils",
      "keywords": ["string", "utilities", "text"],
      "downloads": 150,
      "size": "2 KB",
      "versions": {
        "1.0.0": {
          "published": "2024-01-15T10:00:00Z",
          "downloads": 150
        }
      }
    },
    "http-client": {
      "name": "http-client",
      "description": "HTTP client library for making web requests",
      "author": "Web Contributors",
      "license": "GPL-3.0",
      "homepage": "https://github.com/strata-lang/http-client",
      "repository": "https://github.com/strata-lang/http-client",
      "keywords": ["http", "web", "client", "request"],
      "downloads": 325,
      "size": "4 KB",
      "versions": {
        "1.0.0": { "published": "2024-01-10T08:00:00Z", "downloads": 230 },
        "1.1.0": { "published": "2024-01-14T15:30:00Z", "downloads": 95 }
      }
    },
    "crypto": {
      "name": "crypto",
      "description": "Cryptographic algorithms: AES, SHA256, and more",
      "author": "Security Team",
      "license": "GPL-3.0",
      "homepage": "https://github.com/strata-lang/crypto",
      "repository": "https://github.com/strata-lang/crypto",
      "keywords": ["crypto", "aes", "sha256", "encryption"],
      "downloads": 222,
      "size": "6 KB",
      "versions": {
        "2.0.0": { "published": "2024-01-12T12:00:00Z", "downloads": 180 },
        "2.1.0": { "published": "2024-01-15T09:00:00Z", "downloads": 42 }
      }
    },
    "math-utils": {
      "name": "math-utils",
      "description": "Advanced mathematical functions: linear algebra, statistics",
      "author": "Math Contributors",
      "license": "GPL-3.0",
      "homepage": "https://github.com/strata-lang/math-utils",
      "repository": "https://github.com/strata-lang/math-utils",
      "keywords": ["math", "linear-algebra", "statistics"],
      "downloads": 85,
      "size": "5 KB",
      "versions": {
        "1.2.0": { "published": "2024-01-13T14:00:00Z", "downloads": 85 }
      }
    }
  };

  function getPackageFromURL() {
    const params = new URLSearchParams(window.location.search);
    return params.get('pkg') || 'string-utils';
  }

  function loadPackage(name) {
    const pkg = packages[name];
    if (!pkg) {
      document.body.innerHTML = '<div class="p-8 text-center"><h1>Package not found</h1></div>';
      return;
    }

    document.getElementById('packageName').textContent = pkg.name;
    document.getElementById('packageAuthor').textContent = `by ${pkg.author}`;
    document.getElementById('packageDescription').textContent = pkg.description;
    document.getElementById('packageLicense').textContent = pkg.license;
    document.getElementById('packageDownloads').textContent = pkg.downloads.toLocaleString();
    document.getElementById('versionCount').textContent = Object.keys(pkg.versions).length;
    document.getElementById('packageSize').textContent = pkg.size;
    document.getElementById('packageVersion').textContent = Object.keys(pkg.versions).sort().reverse()[0];
    document.getElementById('packageUpdated').textContent = new Date(Object.values(pkg.versions)[0].published).toLocaleDateString();

    document.getElementById('installCommand').textContent = `strata add ${pkg.name}`;
    document.getElementById('homepageLink').href = pkg.homepage;
    document.getElementById('repositoryLink').href = pkg.repository;

    // Keywords
    document.getElementById('keywords').innerHTML = pkg.keywords
      .map(kw => `<span class="inline-block bg-blue-600/20 text-blue-400 px-3 py-1 rounded-full text-sm">${kw}</span>`)
      .join('');

    // Versions
    const versions = Object.entries(pkg.versions).sort((a, b) => b[0].localeCompare(a[0]));
    document.getElementById('versionsList').innerHTML = versions
      .map(([ver, data]) => {
        const date = new Date(data.published).toLocaleDateString();
        return `
          <tr class="version-row border-b border-slate-800 hover:bg-slate-800/30">
            <td class="px-6 py-4 font-semibold">${ver}</td>
            <td class="px-6 py-4 text-slate-400">${date}</td>
            <td class="px-6 py-4">${data.downloads}</td>
            <td class="px-6 py-4 text-right">
              <button onclick="installVersion('${pkg.name}@${ver}')" class="text-blue-400 hover:text-blue-300">Install</button>
            </td>
          </tr>
        `;
      })
      .join('');
  }

  function switchTab(tab) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
    document.querySelectorAll('.tab-button').forEach(el => {
      el.classList.remove('border-blue-600', 'text-white');
      el.classList.add('border-transparent', 'text-slate-400');
    });

    // Show selected tab
    document.getElementById(`${tab}-tab`).classList.remove('hidden');
    document.getElementById(`tab-${tab}`).classList.remove('border-transparent', 'text-slate-400');
    document.getElementById(`tab-${tab}`).classList.add('border-blue-600', 'text-white');
  }

  function copyInstall() {
    const pkg = getPackageFromURL();
    const command = `strata add ${pkg}`;
    navigator.clipboard.writeText(command);
    alert('Copied to clipboard: ' + command);
  }

  function installVersion(version) {
    const command = `strata add ${version}`;
    navigator.clipboard.writeText(command);
    alert('Copied to clipboard: ' + command);
  }

  // Load package on page load
  window.addEventListener('load', () => {
    loadPackage(getPackageFromURL());
  });
</script>

</body>
</html>
