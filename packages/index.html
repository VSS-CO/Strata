<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strata Package Registry</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-feature-settings: "liga" 1, "calt" 1;
    }
    .package-card {
      transition: all 0.3s ease;
    }
    .package-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.1);
    }
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
    }
    .badge-primary {
      background-color: rgba(59, 130, 246, 0.1);
      color: #3b82f6;
    }
    .badge-success {
      background-color: rgba(34, 197, 94, 0.1);
      color: #22c55e;
    }
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
      border-radius: 0.5rem;
    }
    .search-box {
      position: relative;
    }
    .search-box input {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 2.5rem;
      border-radius: 0.375rem;
      border: 2px solid #1e293b;
      background-color: #0f172a;
      color: white;
    }
    .search-box input:focus {
      outline: none;
      border-color: #3b82f6;
    }
    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #64748b;
    }
  </style>
</head>
<body class="bg-slate-950 text-slate-100">

<!-- HEADER -->
<header class="border-b border-slate-800 sticky top-0 z-50 bg-slate-950/95 backdrop-blur">
  <div class="max-w-7xl mx-auto px-8 py-4 flex justify-between items-center">
    <div class="flex items-center gap-2">
      <span class="text-2xl font-bold tracking-tight">ðŸ“¦ Strata Registry</span>
    </div>
    <nav class="space-x-6 text-lg">
      <a href="../index.html" class="text-slate-400 hover:text-white transition">Home</a>
      <a href="../docs.html" class="text-slate-400 hover:text-white transition">Docs</a>
      <a href="index.html" class="text-white font-semibold">Registry</a>
    </nav>
  </div>
</header>

<!-- HERO -->
<section class="max-w-7xl mx-auto px-8 py-16">
  <div class="text-center mb-12">
    <h1 class="text-5xl font-extrabold tracking-tight mb-4">
      Strata Package Registry
    </h1>
    <p class="text-xl text-slate-400 max-w-2xl mx-auto mb-8">
      Discover and install packages for your Strata projects. 4 packages, 6 versions, trusted by developers.
    </p>
  </div>

  <!-- SEARCH -->
  <div class="mb-12">
    <div class="search-box">
      <svg class="search-icon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
      </svg>
      <input type="text" id="searchInput" placeholder="Search packages..." />
    </div>
  </div>

  <!-- STATISTICS -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-16">
    <div class="stat-card">
      <div class="text-4xl font-bold mb-2">4</div>
      <div class="text-blue-100">Total Packages</div>
    </div>
    <div class="stat-card">
      <div class="text-4xl font-bold mb-2">6</div>
      <div class="text-blue-100">Total Versions</div>
    </div>
    <div class="stat-card">
      <div class="text-4xl font-bold mb-2">782</div>
      <div class="text-blue-100">Total Downloads</div>
    </div>
    <div class="stat-card">
      <div class="text-4xl font-bold mb-2">4.6â˜…</div>
      <div class="text-blue-100">Avg. Quality</div>
    </div>
  </div>
</section>

<!-- PACKAGES GRID -->
<section class="max-w-7xl mx-auto px-8 pb-24">
  <h2 class="text-3xl font-bold mb-8">Featured Packages</h2>
  <div id="packagesGrid" class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Populated by JavaScript -->
  </div>
</section>

<!-- QUICK LINKS -->
<section class="max-w-7xl mx-auto px-8 mb-8 flex gap-4 justify-between items-center">
  <div class="flex gap-4">
    <select id="sortSelect" class="bg-slate-800 text-white px-4 py-2 rounded border border-slate-700 text-sm">
      <option value="downloads">Sort: Downloads</option>
      <option value="recent">Sort: Recently Updated</option>
      <option value="name">Sort: Name (A-Z)</option>
    </select>
  </div>
  <a href="stats.html" class="text-blue-400 hover:text-blue-300 font-semibold">ðŸ“Š View Statistics â†’</a>
</section>

<!-- FOOTER -->
<footer class="border-t border-slate-800 mt-24 py-12">
  <div class="max-w-7xl mx-auto px-8">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
      <div>
        <h3 class="font-semibold mb-4">Package Manager</h3>
        <ul class="space-y-2 text-slate-400">
          <li><a href="#" class="hover:text-white transition">CLI Guide</a></li>
          <li><a href="#" class="hover:text-white transition">Create Package</a></li>
          <li><a href="#" class="hover:text-white transition">Publish</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-semibold mb-4">Registry</h3>
        <ul class="space-y-2 text-slate-400">
          <li><a href="#" class="hover:text-white transition">Browse Packages</a></li>
          <li><a href="#" class="hover:text-white transition">Quality Guidelines</a></li>
          <li><a href="#" class="hover:text-white transition">Statistics</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-semibold mb-4">Community</h3>
        <ul class="space-y-2 text-slate-400">
          <li><a href="#" class="hover:text-white transition">GitHub</a></li>
          <li><a href="#" class="hover:text-white transition">Discord</a></li>
          <li><a href="#" class="hover:text-white transition">Issues</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-semibold mb-4">Legal</h3>
        <ul class="space-y-2 text-slate-400">
          <li><a href="#" class="hover:text-white transition">Terms of Service</a></li>
          <li><a href="#" class="hover:text-white transition">Privacy Policy</a></li>
          <li><a href="#" class="hover:text-white transition">Code of Conduct</a></li>
        </ul>
      </div>
    </div>
    <div class="border-t border-slate-800 pt-8 text-center text-slate-400">
      <p>&copy; 2024 Strata Package Registry. All packages under their respective licenses.</p>
    </div>
  </div>
</footer>

<script>
  const registryData = {
    "packages": {
      "string-utils": {
        "name": "string-utils",
        "description": "String utility functions for Strata",
        "author": "Strata Contributors",
        "license": "GPL-3.0",
        "homepage": "https://github.com/strata-lang/string-utils",
        "keywords": ["string", "utilities", "text"],
        "downloads": 150,
        "versions": {
          "1.0.0": {
            "published": "2024-01-15T10:00:00Z",
            "downloads": 150
          }
        }
      },
      "http-client": {
        "name": "http-client",
        "description": "HTTP client library for making web requests",
        "author": "Web Contributors",
        "license": "GPL-3.0",
        "homepage": "https://github.com/strata-lang/http-client",
        "keywords": ["http", "web", "client", "request"],
        "downloads": 325,
        "versions": {
          "1.0.0": {
            "published": "2024-01-10T08:00:00Z",
            "downloads": 230
          },
          "1.1.0": {
            "published": "2024-01-14T15:30:00Z",
            "downloads": 95
          }
        }
      },
      "crypto": {
        "name": "crypto",
        "description": "Cryptographic algorithms: AES, SHA256, and more",
        "author": "Security Team",
        "license": "GPL-3.0",
        "homepage": "https://github.com/strata-lang/crypto",
        "keywords": ["crypto", "aes", "sha256", "encryption"],
        "downloads": 222,
        "versions": {
          "2.0.0": {
            "published": "2024-01-12T12:00:00Z",
            "downloads": 180
          },
          "2.1.0": {
            "published": "2024-01-15T09:00:00Z",
            "downloads": 42
          }
        }
      },
      "math-utils": {
        "name": "math-utils",
        "description": "Advanced mathematical functions: linear algebra, statistics",
        "author": "Math Contributors",
        "license": "GPL-3.0",
        "homepage": "https://github.com/strata-lang/math-utils",
        "keywords": ["math", "linear-algebra", "statistics"],
        "downloads": 85,
        "versions": {
          "1.2.0": {
            "published": "2024-01-13T14:00:00Z",
            "downloads": 85
          }
        }
      }
    }
  };

  function renderPackages(packages = null) {
    const grid = document.getElementById('packagesGrid');
    const packagesToRender = packages || Object.values(registryData.packages);
    
    grid.innerHTML = packagesToRender.map(pkg => {
      const latestVersion = Object.keys(pkg.versions).sort().reverse()[0];
      const publishedDate = new Date(pkg.versions[latestVersion].published);
      const daysAgo = Math.floor((Date.now() - publishedDate) / (1000 * 60 * 60 * 24));
      
      return `
        <div class="package-card p-8 rounded-2xl bg-slate-900 border border-slate-800">
          <div class="flex justify-between items-start mb-4">
            <div>
              <h3 class="text-2xl font-bold mb-1">${pkg.name}</h3>
              <p class="text-slate-400">${pkg.author}</p>
            </div>
            <span class="badge badge-success">${latestVersion}</span>
          </div>
          
          <p class="text-slate-300 mb-4">${pkg.description}</p>
          
          <div class="flex gap-2 mb-6 flex-wrap">
            ${pkg.keywords.map(kw => `<span class="badge badge-primary">${kw}</span>`).join('')}
          </div>
          
          <div class="grid grid-cols-3 gap-4 mb-6 py-4 border-t border-b border-slate-800">
            <div>
              <div class="text-2xl font-bold text-blue-400">${pkg.downloads}</div>
              <div class="text-xs text-slate-400">Downloads</div>
            </div>
            <div>
              <div class="text-2xl font-bold text-green-400">${Object.keys(pkg.versions).length}</div>
              <div class="text-xs text-slate-400">Versions</div>
            </div>
            <div>
              <div class="text-2xl font-bold text-purple-400">${daysAgo}d</div>
              <div class="text-xs text-slate-400">Updated</div>
            </div>
          </div>
          
          <div class="flex gap-3">
            <a href="#" onclick="installPackage('${pkg.name}'); return false;" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg transition text-center">
              Install
            </a>
            <a href="${pkg.homepage}" target="_blank" class="flex-1 bg-slate-800 hover:bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg transition text-center">
              GitHub
            </a>
          </div>
        </div>
      `;
    }).join('');
  }

  function searchPackages(query) {
    if (!query.trim()) {
      renderPackages();
      return;
    }
    
    const filtered = Object.values(registryData.packages).filter(pkg => 
      pkg.name.toLowerCase().includes(query.toLowerCase()) ||
      pkg.description.toLowerCase().includes(query.toLowerCase()) ||
      pkg.keywords.some(kw => kw.toLowerCase().includes(query.toLowerCase()))
    );
    
    renderPackages(filtered);
  }

  function installPackage(name) {
    const command = `strata add ${name}`;
    const alert = document.createElement('div');
    alert.className = 'fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
    alert.textContent = `Copy to terminal: ${command}`;
    document.body.appendChild(alert);
    
    navigator.clipboard.writeText(command).catch(err => console.error('Copy failed', err));
    
    setTimeout(() => alert.remove(), 3000);
  }

  // Event listeners
  document.getElementById('searchInput').addEventListener('input', (e) => {
    searchPackages(e.target.value);
  });

  document.getElementById('sortSelect').addEventListener('change', (e) => {
    const sorted = Object.values(registryData.packages).sort((a, b) => {
      if (e.target.value === 'downloads') return b.downloads - a.downloads;
      if (e.target.value === 'name') return a.name.localeCompare(b.name);
      return 0;
    });
    renderPackages(sorted);
  });

  // Initial render
  renderPackages();
</script>

</body>
</html>
